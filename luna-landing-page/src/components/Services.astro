---
import BookCard from "../components/ui/BooksCards.jsx"; // <-- Importas el .jsx
import book1 from "../assets/images/books/book1.webp";
import book2 from "../assets/images/books/book2.webp";
import book3 from "../assets/images/books/book3.webp";
import book4 from "../assets/images/books/book4.webp";

const books = [
  {
    id: 1,
    title: "Guía de Marketing",
    description: "Aprende desde los fundamentos hasta las estrategias avanzadas de marketing digital.",
    image: book1,
    color: "bg-blue-600 ",
  },
  {
    id: 2,
    title: "Guía de Ventas",
    description: "Aprende estrategias efectivas para aumentar tus ventas y cerrar más tratos.",
    image: book2,
    color: "bg-indigo-600 ",
  },
  {
    id: 3,
    title: "Guía de Productividad",
    description: "Aprende a organizar tu tiempo y aumentar tu productividad de manera efectiva.",
    image: book3,
    color: "bg-slate-700 ",
  },
  {
    id: 4,
    title: "Guía de Finanzas",
    description: "Domina los conceptos financieros esenciales para gestionar mejor tu dinero.",
    image: book4,
    color: "bg-cyan-600 ",
  },
];
---
<section role="region" aria-label="Libros más vendidos" class="books-section w-full bg-gradient-to-br from-gray-900 via-gray-800 to-black py-16 md:py-[180px] px-7 md:px-30">
  <div class="max-w-6xl mx-auto flex flex-col md:flex-row md:items-start gap-8 md:gap-16">

     
    <!-- Left -->
    <div class="md:w-2/5 flex flex-col gap-6 text-white">
      <h2 class="font-display text-[55px] md:text-[60px] text-center md:text-start font-bold leading-[1.1] text-blue-400">
        Bestselling
        <span class="block text-[50px] md:text-[55px] text-blue-400 font-extrabold tracking-wide">BOOKS</span>
      </h2>
      <p class="hidden lg:block md:text-[17px] leading-relaxed tracking-wide text-gray-100">
        Estos libros fueron creados para acompañarte en tu proceso de aprendizaje y transformación profesional.
      </p>
    </div>
    

    <!-- Right -->
    <div class="md:w-3/5 flex flex-col gap-6">
      <div class="books-viewport w-full overflow-hidden">
        <div class="books-track inline-flex flex-nowrap gap-8 items-start">
            <span class="sr-only">
    Desplácese horizontalmente para ver más libros
  </span>
          {books.map((book) => (
            <BookCard client:load  {...book} />
          ))}
        </div>
      </div>
    </div>
  </div>
</section>

<script type="module">
    import gsap from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/index.js";
    import { ScrollTrigger } from "https://cdn.jsdelivr.net/npm/gsap@3.12.5/ScrollTrigger.js";
    gsap.registerPlugin(ScrollTrigger);

    const section = document.querySelector('.books-section');
    const track = section.querySelector('.books-track');
    const viewport = section.querySelector('.books-viewport');

    function initHorizontalScroll() {
        ScrollTrigger.getAll().forEach(t => t.kill());
        gsap.set(track, { x: 0 });

        const trackWidth = track.scrollWidth;
        const viewportWidth = viewport.offsetWidth;
        const distance = trackWidth - viewportWidth;

        if (distance <= 0) return;

        gsap.to(track, {
            x: -distance,
            ease: "none",
            scrollTrigger: {
                trigger: section,
                start: "top -5%",
                end: `+=${distance + viewportWidth}`,
                scrub: true,
                pin: true,
                anticipatePin: 1,
            }
        });
    }

    setTimeout(initHorizontalScroll, 100);

    let resizeTimeout;
    window.addEventListener('resize', () => {
        clearTimeout(resizeTimeout);
        resizeTimeout = setTimeout(initHorizontalScroll, 250);
    });
</script>